<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>状态模式之红绿灯示例</title>
</head>
<body>
<script>
  // 状态
  class State {
    constructor(color) {
      this.color = color;
    }

    handle(context) {
      console.log(`%cturn on ${this.color} light`, `color: ${this.color}`);
      context.setState(this);
    }
  }

  // 主题
  class Context {
    constructor() {
      this.state = null;
    }

    getState() {
      return this.state;
    }

    setState(state) {
      this.state = state;
    }
  }

  let context = new Context();
  let green = new State('green');
  let red = new State('red');
  let yellow = new State('yellow');
  // 绿灯亮了
  green.handle(context);
  console.log(context.getState());

  red.handle(context);
  console.log(context.getState());

  yellow.handle(context);
  console.log(context.getState());
</script>
</body>
</html>
